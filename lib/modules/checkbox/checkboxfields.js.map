{"version":3,"sources":["../../../src/components/modules/checkbox/checkboxfields.jsx"],"names":[],"mappings":"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","file":"checkboxfields.js","sourcesContent":["import React, { Component } from 'react';\nimport { Checkbox } from '../../modules';\nimport classNames from 'classnames';\n\nexport default class CheckboxFields extends Component {\n    static propTypes = {\n        children: React.PropTypes.oneOfType([\n            React.PropTypes.array,\n            React.PropTypes.node\n        ]),\n        className: React.PropTypes.node,\n        component: React.PropTypes.oneOfType([\n            React.PropTypes.element,\n            React.PropTypes.string\n        ]),\n        defaultClasses: React.PropTypes.bool,\n        disabled: React.PropTypes.bool,\n        name: React.PropTypes.string.isRequired,\n        onClick: React.PropTypes.func,\n        radio: React.PropTypes.bool,\n        readOnly: React.PropTypes.bool,\n        type: React.PropTypes.oneOf([\n            'grouped',\n            'inline'\n        ]).isRequired\n    };\n\n    static defaultProps = {\n        component: 'div',\n        defaultClasses: true\n    };\n\n    constructor(props) {\n        super(props);\n\n        let active = this.props.radio ? -1 : [];\n\n        this.state = {\n            active: active\n        };\n    }\n\n    onClick(key)  {\n        // don't remove radio buttons if you click them twice\n        if (key === this.state.active && this.props.radio) {\n            return;\n        // but do remove for everything else\n        } else {\n            this.setActive(key);\n        }\n    }\n\n    renderChildren() {\n        let index = 0;\n        let element = null;\n\n        if (React.Children.count(this.props.children) === 1) {\n            return this.cloneChild(index,\n                React.Children.only(this.props.children)\n            );\n        } else {\n            return React.Children.map(this.props.children, child => {\n                if (child.type == Checkbox) {\n                    element = this.cloneChild(index, child);\n\n                    element = React.DOM.div({\n                        key: index,\n                        className: 'field'\n                    }, element);\n\n                    index++;\n                } else if (typeof child === 'string') {\n                    return (\n                        <label htmlFor={this.props.name}>{child}</label>\n                    );\n                } else {\n                    element = child;\n                }\n\n                return element;\n            });\n        }\n    }\n\n    render() {\n        /* eslint-disable no-use-before-define */\n        let { component, defaultClasses, name, ...other } = this.props;\n        /* eslint-enable no-use-before-define */\n        other.className = classNames(this.props.className, this.getClasses());\n\n        return React.createElement(\n            this.props.component,\n            other,\n            this.renderChildren()\n        );\n    }\n\n    // clone a chid and update the props\n    cloneChild(index, child) {\n        let boundClick = this.onClick.bind(this, index);\n\n        /* eslint-disable no-use-before-define */\n        let { children, component, defaultClasses, onClick, type,\n              ...other } = this.props;\n        /* eslint-enable no-use-before-define */\n\n        return React.cloneElement(child, {\n            key: index,\n            checked: this.getActive(index),\n            onClick: boundClick,\n            radio: this.props.radio,\n            readOnly: this.props.readOnly || this.props.disabled,\n            ...other\n        });\n    }\n\n    getClasses() {\n        let classes = {\n            // default\n\n            // positioning\n\n            // types\n\n            // component\n\n            // variations\n            fields: React.Children.count(this.props.children) > 1\n        };\n\n        classes[this.props.type] = !!this.props.type;\n\n        return classes;\n    }\n\n    getActive(index) {\n        let state = this.state.active;\n        let active = false;\n\n        if (Array.isArray(state)) {\n            active = state.indexOf(index) > -1 ? true : false;\n        } else {\n            active = state == index ? true : false;\n        }\n\n        return active;\n    }\n\n    setActive(index) {\n        if (this.props.readOnly || this.props.disabled) return;\n\n        let state = this.state.active;\n\n        // should only be an array if it's checkbox, not radio\n        // IE 9+ for indexOf\n        if (Array.isArray(state)) {\n            let position = state.indexOf(index);\n\n            if (position > -1) {\n                state.splice(position, 1);\n            } else {\n                state.push(index);\n            }\n\n        // it's a radio\n        } else {\n            state = index;\n        }\n\n        this.setState({\n            active: state\n        });\n    }\n}\n"]}